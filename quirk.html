<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>animateex</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style type="text/css">
    canvas{
      background-color: black;
    }
      body{
        margin: 0;
        overflow: hidden;
      }
      small{
        cursor: pointer;
        font-size: 4vw;
        position: fixed;
        right: 2vw;
        top: 2vw;
      }

  </style>
</head>
<body onclick="an(event);">
  <audio preload="auto" id='aud' src="button35X.mp3"></audio>
  <small id='vol' onclick="volite(event)">
    ðŸ”Š
  </small>

  <canvas id="canvas">
    <script>
      let can = document.getElementById("canvas"),
      aud = document.getElementById("aud"),
      v = true,
      vol = document.getElementById("vol"),
      play = async function(){
        aud.play();
        return;
      },
      innerw, innerh, px=30;
      innerw = window.innerWidth;
      innerh = window.innerHeight;

      can.width = innerw;
      can.height = innerh;

      let line = can.getContext("2d");

      class point{
        constructor(x, y){
          this.ry = Number((Math.random() * 6).toFixed(1));
          this.rx = Number((Math.random() * 6).toFixed(1));
          this.x = x;
          this.y = y;
        }
        alter = () => {
          // this.x += (this.x >= (innerw/2))? this.rate: -this.rate;
          this.y += this.ry;
          this.x += this.rx;
        }
      }

      let points = new Array, num = Number(prompt("ðŸ”¢?"));

      for(x = 0; x < num; x++){
        points.push(new point( Number((Math.random() * innerw).toFixed(1)), Number((Math.random() * innerh).toFixed(1)) ))
      }

      class main{
        constructor(){

        }

        draw = () => {
          line.strokeStyle=`goldenrod`;
          line.lineWidth = 1;
          line.beginPath();
          for(let i=0;i<points.length;i++){
              line.lineTo(points[i].x, points[i].y);
              // line.arc(points[i].x+20, points[i].y, 20, 0, 2*Math.PI);
          }
          line.closePath();
          
          line.stroke();
        }
      }

      let body = new main();
      // body.draw();

      let update = () => {
        body.draw()
        for(let i = 0; i < points.length; i++){
          points[i].alter();
        }

        for(let i = 0; i < points.length; i++){
          if(points[i].x >= innerw-px*.5){
            points[i].x = innerw-px*.5;
            points[i].rx = points[i].rx * -1;
            play();
          }
          if(points[i].x <= px*.5){
            points[i].x = px*.5;
            points[i].rx = points[i].rx * -1;
            play();
          }

          if(points[i].y >= innerh-px){
            points[i].y = innerh-px;
            points[i].ry = points[i].ry * -1;
            play();
          }
          if(points[i].y <= px){
            points[i].y = px;
            points[i].ry = points[i].ry * -1;
            play();
          }
          // if(points[i].x <= innerw/2){
          //   points[i].rate = points[i].rate * -1;
          // }

        }

        // line.clearRect(0, 0, can.width, can.height);
        requestAnimationFrame(update);
        setTimeout(() => {
          innerw = window.innerWidth;
    can.width = innerw;
    
    innerh = window.innerHeight;
    can.height = innerh;
          line.clearRect(0, 0, can.width, can.height)
        }, 10)
      }
      update();

      function size(){
      innerw = window.innerWidth;
      innerh = window.innerHeight;    
      requestAnimationFrame(size)    
      }
      size()

      let an = (e) => {
        x = e.clientX;
        y = e.clientY;

        points.push(new point(x, y))
      }

      function volite(e){
        e.stopPropagation();
        if(v){
          aud.volume = 0;
          vol.innerText = 'ðŸ”‡'
          v = false;
        }else{ 
          aud.volume = 1;
          vol.innerText = 'ðŸ”Š'
          v = true;
        }
      }

    </script>
  </canvas>
</body>
</html>